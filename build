#!/bin/sh

case $@ in

    # Do the build operation if no arguments are supplied
    "")         echo "Building..."
                mkdir -p ./bin/
                javac -sourcepath ./src/ ./src/syntax/*.java -d ./bin/
                pushd ./src/genparser/
                java -cp ../../lib/javacc.jar javacc japi.jj
                popd
                javac -sourcepath ./src/ -cp ./bin/ ./src/genparser/*.java -d ./bin/
                javac -sourcepath ./src/ -cp ./bin/ ./src/parser/*.java -d ./bin/
                echo "Done." ;;

    # Clean the build if the argument was "clean"
    "clean")    echo "Cleaning build..."
                rm ./src/genparser/*.java
                rm ./bin/syntax/*.class
                rm ./bin/parser/*.class
                rm ./bin/genparser/*.class
                rmdir ./bin/syntax/
                rmdir ./bin/parser/
                rmdir ./bin/genparser/
                rmdir ./bin/
                echo "Done." ;;

    # If the arguments were anything else, print an error message and exit with
    # error code 1
    *)          echo "Invalid arguments"
                exit 1 ;;

esac

# If we drop out of the case then the script was successful so exit with 0
exit 0
